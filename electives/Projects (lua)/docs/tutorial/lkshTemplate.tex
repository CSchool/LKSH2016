\documentclass[14pt]{extarticle}

\usepackage[
  a4paper, mag=1000,
  left=2cm, right=1cm, top=2cm, bottom=2cm, headsep=0.7cm, footskip=1.27cm
]{geometry}

\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{cmap}
\usepackage{amsmath}
\usepackage{tabularx}
\usepackage{array}
\usepackage{multirow}
\usepackage{amssymb}
\IfFileExists{pscyr.sty}{\usepackage{pscyr}}{}

% Форматирование чисел
\usepackage{siunitx}
\sisetup{range-phrase = \ldots}

% оглавление + ссылки
\usepackage[pdftex]{hyperref}

\hypersetup{%
    pdfborder = {0 0 0},
    colorlinks,
    citecolor=red,
    filecolor=Darkgreen,
    linkcolor=blue,
    urlcolor=blue
}

\usepackage{hypcap}
\usepackage[numbered]{bookmark} % для цифр в закладках в pdf viewer'ов

\usepackage{tocloft}

\renewcommand{\cftsecaftersnum}{.}
\renewcommand{\cftsubsecaftersnum}{.}

\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}

\renewcommand\cftsecleader{\cftdotfill{\cftdotsep}}
\renewcommand{\cfttoctitlefont}{\hfill\Large\bfseries}
\renewcommand{\cftaftertoctitle}{\hfill}


% листинги
\usepackage{listings}
\usepackage{color}
\definecolor{commentGreen}{rgb}{0,0.6,0}
\usepackage{caption} % для подписей под листингами и таблиц

% цветные ячейки таблиц
\usepackage{colortbl}

% графика
\usepackage[pdftex]{graphicx}
\graphicspath{{./fig/}} % папка с изображениями

\usepackage{setspace} % для полуторного интервала
\onehalfspacing % сам полуторный интервал

\ifpdf\usepackage{epstopdf}\fi

\usepackage{indentfirst} % отступ в первом абзаце

% точки в секция и подсекциях
\usepackage{secdot}
\sectiondot{subsection}

% Подавление висячих строк
\clubpenalty=10000
\widowpenalty=10000

% колонтитулы
\usepackage{fancybox,fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[C]{\small{Обзор Lua за 15 минут}} % шапка верхнего колонтитула!!!
\fancyfoot[C]{\small{\thepage}} % шапка нижнего колонтитула!!!

% section on new page
\let\stdsection\section
\renewcommand\section{\newpage\stdsection}

% стили листингов кодов

\lstdefinestyle{Lua}{
  language=[5.0]Lua,
  basicstyle=\small\ttfamily,
  breakatwhitespace=true,
  breaklines=true,
  showstringspaces=false,
  keywordstyle=\color{blue}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  commentstyle=\color{commentGreen}\ttfamily,
  morecomment=[l][\color{magenta}]{\#},
  numbers=left,
  xleftmargin=1cm
}

\begin{document}

\begingroup
\hypersetup{linkcolor=black}
\tableofcontents
\endgroup

\clearpage

\input{./tutorial.tex}

\end{document} 